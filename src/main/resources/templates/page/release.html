{{#layout}}

{{#style}}
<style>
input[type="button"] + input[type="button"] { margin-right: 12px; }
#bf-content-area .col { overflow-y: auto; height: 100%; }
#bf-content-area .header-row > .col { padding-top: 10px; overflow-y: hidden; }
.header-row { text-align: center; width: 100%; }
.header-row table { width: 100%; }
.list-table th, .list-table td { border: 1px solid #ddd; border-collapse: collapse; font-size: 12px; }
.list-row { width: 100%; height: calc(100% - 150px); }
.list-row .col { height: 100%; overflow-y: auto; padding-right: 0; }
ul.list-wrapper { padding: 0; }
ul.list-wrapper li { padding: 2px 10px; font-size: 14px; font-weight: 300; list-style-type: none; border-bottom: 1px solid #ccc; }
.btn-wrapper { text-align: right; }
.btn-wrapper input { margin-left: 6px; margin-right: 0; }
input[type="button"] + input[type="button"] { margin-right: 0; }
.list-table td { font-size: 12px; border: 1px solid #ddd; border-collapse: collapse; padding-left: 6px; padding-right: 6px; }
.list-table .material-icons { float: left; color: #555; }
.material-icons + div { margin: 2px 0 0 28px; }
</style>
{{/style}}

<div class="row title-area">
	<div class="col col-sm-6">
		<h5>▷ 배포관리</h5>
	</div>
	<div class="col col-sm-6 btn-wrapper">
		<input type="button" value="전체파일" class="btn btn-outline-primary" id="btn-download-all">
		<input type="button" value="변경된파일" class="btn btn-outline-primary" id="btn-download-changed" {{^clist}}disabled{{/clist}}>
		<input type="button" value="내변경파일" class="btn btn-outline-primary" id="btn-download-changed-by-me" {{^mlist}}disabled{{/mlist}}>
	</div>
</div>

<div id="bf-content-area">
	<div class="row header-row">
		
		<!-- 1) 미배포 변경사항 -->
		<div class="col col-sm-3" style="padding-left: 30px;">
	      <div class="row">
      		<div class="col col-sm-12">
		      <h5>미배포 변경사항</h5>
	        </div>
	      </div>
	      <div class="row">
      		<div class="col col-sm-12">
      			<table class="list-table">
      				<colgroup>
     					<col width="20%" />
     					<col width="40%" />
     					<col width="40%" />
      				</colgroup>
      				<thead>
	    				<tr>
	    					<th>작업</th>
	    					<th>파일명</th>
	    					<th>마지막변경일시</th>
	    				</tr>
    				</thead>
    				<tbody>
    				{{#clist}}
					<tr>
						<td class="text-center"><span class="material-icons">{{status}}</span></td>
						<td>{{#filePath}}{{filePath}}{{/filePath}}</td>
						<td class="text-center">{{updDtStr}}</td>
					</tr>
					{{/clist}}
    				{{^clist}}
					<tr>
						<td class="text-center" colspan="3">내역이 없습니다</td>
					</tr>
					{{/clist}}
					</tbody>
      			</table>
	        </div>
	      </div>
		</div>
		
		<!-- 2) 변경이력 -->
		<div class="col col-sm-6">
	      <div class="row">
      		<div class="col col-sm-12">
		      <h5>변경이력</h5>
	        </div>
	      </div>
	      <div class="row">
      		<div class="col col-sm-12" style="padding-right: 1px;">
      			<table class="list-table">
      				<colgroup>
	  					<col width="8%"/>
	  					<col width="18%"/>
	  					<col width="25%"/>
	  					<col width="15%"/>
	  					<col width="14%"/>
	  					<col width="20%"/>
      				</colgroup>
      				<thead>
    				<tr>
    					<th>작업</th>
    					<th>구분</th>
    					<th>이름</th>
    					<th>파일명</th>
    					<th>변경자</th>
    					<th>변경일시</th>
    				</tr>
    				</thead>
    				<tbody>
    				{{#hlist}}
					<tr {{^released}}style="background-color: #ffcc;"{{/released}}>
						<td class="text-center"><span class="material-icons">{{status}}</span></td>
						<td class="text-center">{{type}}</td>
						<td>{{#title}}{{title}}{{/title}}</td>
						<td>{{#filePath}}{{filePath}}{{/filePath}}</td>
						<td class="text-center">{{#userid}}{{userid}}{{/userid}}</td>
						<td class="text-center">{{updDtStr}}</td>
					</tr>
					{{/hlist}}
    				{{^hlist}}
					<tr>
						<td class="text-center" colspan="6">내역이 없습니다</td>
					</tr>
					{{/hlist}}
					</tbody>
      			</table>
	        </div>
		  </div>
		</div>
		
		<!-- 3) 배포이력 -->
		<div class="col col-sm-3" style="padding-right: 0px;overflow-x: hidden;">
	      <div class="row">
      		<div class="col col-sm-12">
		      <h5>배포이력</h5>
	        </div>
	      </div>
	      <div class="row">
      		<div class="col col-sm-12">
      			<table class="list-table">
      				<colgroup>
     					<col width="33%" />
     					<col width="33%" />
     					<col width="33%" />
      				</colgroup>
      				<thead>
    				<tr>
    					<td>배포구분</td>
    					<td>배포자</td>
    					<td>다운로드일시</td>
    				</tr>
    				</thead>
    				<tbody>
					{{#rlist}}
					<tr>
						<td>
					  		<a href="javascript:downloadFromHistory({{id}})"><span><i class="far fa-file-code"></i>&nbsp;{{typeKr}}</span></a>
				  		</td>
				  		<td>{{#userid}}{{userid}}{{/userid}}</td>
				  		<td>{{updDtStr}}</td>
					  </a>
					</re>
					{{/rlist}}
    				{{^rlist}}
					<tr>
						<td class="text-center" colspan="3">내역이 없습니다</td>
					</tr>
					{{/rlist}}
					</tbody>
      			</table>
	        </div>
	      </div>     	   
		</div>
	</div>
	
</div>

<iframe id="ifrm" style="display: none;"></iframe>

{{#script}}
<script src="/page/release.js"></script>
{{/script}}

{{/layout}}